<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
  <title>Annapoorneshwari Tyre & Painting Works</title>
  
  <link rel="icon" href="https://www.google.com/favicon.ico" type="image/x-icon" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
  
<style>
    :root {
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --secondary-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      --accent-color: #ffc107;
      --bg-light: #f8f9fa;
      --text-dark: #333;
      --glass-bg: rgba(255, 255, 255, 0.95);
      --shadow-primary: 0 15px 30px rgba(102, 126, 234, 0.1); /* Reduced shadow */
      --shadow-hover: 0 20px 40px rgba(102, 126, 234, 0.15); /* Reduced hover shadow */
      --section-spacing: 2.5rem; /* New compact spacing variable */
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: var(--primary-gradient);
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle at 20% 80%, rgba(120, 162, 255, 0.3) 0%, transparent 50%),
                  radial-gradient(circle at 80% 20%, rgba(255, 120, 198, 0.3) 0%, transparent 50%);
      z-index: -1;
      animation: backgroundShift 10s ease-in-out infinite alternate;
    }

    @keyframes backgroundShift {
      0% { transform: translateX(-10px) translateY(-10px); }
      100% { transform: translateX(10px) translateY(10px); }
    }

    /* COMPACT: Service Card Size */
    .service-card {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 15px; /* Slightly smaller radius */
      padding: 1.5rem; /* Reduced padding */
      transition: all 0.3s ease; /* Faster transition */
      box-shadow: var(--shadow-primary);
      height: 100%;
    }

    .service-card:hover {
      transform: translateY(-5px) scale(1.01); /* Reduced hover effect */
      box-shadow: var(--shadow-hover);
    }

    /* COMPACT: Service Icon Size */
    .service-icon {
      width: 60px; height: 60px; /* Smaller icon */
      border-radius: 15px;
      background: var(--secondary-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem; /* Reduced margin */
      font-size: 1.5rem; /* Smaller font */
      color: white;
      box-shadow: 0 8px 20px rgba(79, 172, 254, 0.2);
      transition: transform 0.3s ease;
    }

    .service-card:hover .service-icon {
      transform: scale(1.05) rotate(3deg); /* Reduced hover effect */
    }

    .rating-display {
      background: rgba(79, 172, 254, 0.1);
      border-radius: 10px; /* Smaller radius */
      padding: 10px; /* Reduced padding */
      margin-top: 15px; /* Reduced margin */
      backdrop-filter: blur(10px);
    }

    .star-rating { color: var(--accent-color); }

    .global-rating-btn {
      background: var(--primary-gradient);
      border: none;
      color: white;
      font-weight: 600;
      transition: all 0.4s ease;
      box-shadow: var(--shadow-primary);
      border-radius: 50px;
      padding: 15px 30px; /* Slightly smaller button */
    }

    .global-rating-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
      color: white;
    }

    .navbar {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.95), rgba(118, 75, 162, 0.95)) !important;
      backdrop-filter: blur(25px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2); /* Reduced shadow */
      animation: slideDown 0.8s ease forwards;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1030;
    }

    @keyframes slideDown {
      from { transform: translateY(-100%); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .navbar-nav .nav-link {
      position: relative;
      color: white !important;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .navbar-nav .nav-link::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, #ffffff, #00f2fe);
      transition: width 0.3s ease;
    }

    .navbar-nav .nav-link:hover::after {
      width: 100%;
    }

    /* Sliding Sidebar for Mobile (Keep standard for functionality) */
    .sidebar {
      position: fixed;
      top: 0;
      right: -300px;
      width: 300px;
      height: 100vh;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.98), rgba(118, 75, 162, 0.98));
      backdrop-filter: blur(25px);
      box-shadow: -5px 0 20px rgba(0, 0, 0, 0.3);
      transition: right 0.3s ease;
      z-index: 1040;
      padding: 80px 20px 20px;
    }

    .sidebar.active {
      right: 0;
    }

    .sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1035;
    }

    .sidebar-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .sidebar .nav-link {
      color: white !important;
      font-size: 1.1rem;
      padding: 15px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: block;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .sidebar .nav-link:hover {
      background: rgba(255, 255, 255, 0.1);
      padding-left: 10px;
    }

    /* COMPACT: Hero Section Adjustments */
    .hero-section {
      background: transparent !important;
      position: relative;
      overflow: hidden;
      min-height: 60vh !important; /* Reduced height */
      padding-top: 100px !important; /* Reduced top padding */
    }

    .hero-content {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border-radius: 20px; /* Smaller radius */
      padding: 3rem 2rem; /* Reduced padding */
      box-shadow: var(--shadow-primary);
      border: 1px solid rgba(255, 255, 255, 0.2);
      text-align: center;
      margin: 1.5rem auto; /* Reduced margin */
      max-width: 700px; /* Slightly narrower */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 300px; /* Ensure minimum height */
    }

    .hero-heading {
      font-size: clamp(2rem, 5vw, 3.5rem); /* More reasonable size range */
      font-weight: 800;
      margin-bottom: 1rem;
      line-height: 1.2;
      word-break: break-word; /* Prevent overflow */
      hyphens: auto; /* Allow hyphenation if needed */
      text-align: center;
      width: 100%;
    }

    .hero-subtitle {
      font-size: clamp(1rem, 2.5vw, 1.4rem); /* Responsive subtitle */
      margin-bottom: 2rem;
      line-height: 1.4;
      word-break: break-word;
      text-align: center;
      width: 100%;
    }
    
    /* COMPACT: General Section Adjustments */
    .section-container {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border-radius: 20px; /* Smaller radius */
      padding: 3rem 2rem; /* Reduced padding */
      box-shadow: var(--shadow-primary);
      border: 1px solid rgba(255, 255, 255, 0.2);
      margin: var(--section-spacing) 0; /* Use variable for spacing */
    }

    .section-title {
      font-size: 2.5rem; /* Slightly smaller title */
      font-weight: 800;
      text-align: center;
      margin-bottom: 2rem; /* Reduced margin */
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* UPDATED: Image preview styles */
    .image-preview-container {
      display: flex;
      flex-wrap: wrap;
      gap: 8px; /* Reduced gap */
      margin-top: 8px; /* Reduced margin */
    }

    .image-preview-item {
      position: relative;
      width: 80px; /* Smaller preview size */
      height: 80px;
      border-radius: 8px; /* Smaller radius */
      overflow: hidden;
      border: 1px solid #ddd;
    }

    .image-preview-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .image-preview-remove {
      position: absolute;
      top: 3px;
      right: 3px;
      background: rgba(255, 0, 0, 0.8);
      color: white;
      border: none;
      border-radius: 50%;
      width: 20px; /* Smaller remove button */
      height: 20px;
      cursor: pointer;
      font-size: 10px;
      line-height: 1;
      padding: 0;
    }

    /* UPDATED: Booking selector in modal */
    .booking-option {
      padding: 10px; /* Reduced padding */
      border: 1px solid #e0e0e0; /* Thinner border */
      border-radius: 8px; /* Smaller radius */
      margin-bottom: 8px; /* Reduced margin */
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .booking-option:hover {
      border-color: #4facfe;
      background: rgba(79, 172, 254, 0.1);
    }

    .booking-option.selected {
      border-color: #4facfe;
      background: rgba(79, 172, 254, 0.2);
    }

    /* Enhanced Mobile Responsiveness (Overrides for compactness) */
    @media (max-width: 1200px) {
      .section-container { padding: 2.5rem 1.5rem; margin: 1.5rem 1rem; }
      .hero-content { padding: 2.5rem 1.5rem; margin: 1rem; }
    }

    @media (max-width: 992px) {
      .navbar-brand { font-size: 1rem; }
      .section-title { font-size: 2.2rem; }
      .hero-content { padding: 2rem 1rem; }
      .section-container { padding: 2rem 1rem; margin: 1rem 0.5rem; }
      .service-card { padding: 1.25rem; }
    }

    @media (max-width: 768px) {
      body { padding-top: 60px; } /* Reduced top padding */

      .navbar {
        padding: 0.5rem 1rem;
        backdrop-filter: blur(25px);
      }
      
      /* REQUIRED UPDATE: Full name on mobile */
      .navbar-brand {
        width: calc(100% - 70px); /* Leave space for toggler */
      }
      .navbar-text {
        font-size: 0.9rem; /* Smaller font for fit */
        line-height: 1.2;
        white-space: normal; /* Allow wrap/full name */
        margin-right: auto; /* Push toggler to the right */
        text-align: left;
      }

      .navbar-toggler {
        margin-left: 0.5rem;
      }

      .hero-section { min-height: 55vh; padding-top: 80px; } /* More compact */
      .hero-content {
        padding: 1.5rem 1rem;
        margin: 0.5rem;
        border-radius: 12px;
      }

      .hero-heading {
        font-size: clamp(1.6rem, 7vw, 3rem);
        margin-bottom: 0.75rem;
      }

      .hero-subtitle {
        font-size: 1.1rem;
        margin-bottom: 1.25rem;
      }

      .btn-hero, .btn-outline-hero {
        padding: 10px 20px; /* More compact buttons */
        font-size: 0.85rem;
        margin: 0.25rem auto;
        display: inline-block; /* Allow side-by-side */
        width: auto;
        max-width: none;
      }
      /* If buttons must stack on smallest screen, keep display: block in @media(max-width: 576px) */

      .section-container {
        padding: 1.5rem 1rem; /* More compact section */
        margin: 1rem 0.25rem; /* Reduced section margin */
        border-radius: 12px;
      }

      .section-title {
        font-size: 1.8rem;
        margin-bottom: 1.5rem;
      }

      .service-card {
        padding: 1rem 0.75rem; /* Very compact service card */
        margin-bottom: 0.5rem;
        border-radius: 12px;
      }

      .service-icon {
        width: 50px;
        height: 50px;
        margin-bottom: 0.75rem;
        font-size: 1.5rem;
      }
      
      /* Footer adjustments for better mobile layout */
      footer {
        padding: 1rem 0;
      }
      .footer-section .col-md-6 {
        text-align: center !important;
      }
      .footer-section .d-flex {
        justify-content: center !important;
        margin-top: 0.5rem;
      }
    }

    @media (max-width: 576px) {
      .hero-section { min-height: 50vh; padding-top: 70px; }
      
      .navbar-text {
        font-size: 0.8rem; /* Even smaller font to ensure fit */
      }

      .hero-content {
        padding: 1rem 0.75rem;
        margin: 0.25rem;
      }
      
      .btn-hero, .btn-outline-hero {
        display: block;
        width: 80%;
        max-width: 200px;
        margin: 0.5rem auto;
      }

      .section-container {
        padding: 1rem 0.75rem;
        margin: 0.75rem 0.25rem;
      }

      .section-title {
        font-size: 1.6rem;
        margin-bottom: 1rem;
      }

      .service-card h4 {
        font-size: 1rem;
        margin-bottom: 0.4rem;
      }

      .service-card p {
        font-size: 0.8rem;
        margin-bottom: 0.5rem;
      }

      .rating-display {
        padding: 8px;
        margin-top: 8px;
      }

      .global-rating-btn {
        padding: 10px 20px;
        font-size: 0.85rem;
      }
      
      .about-section h3 {
        font-size: 1.5rem;
      }
      
      .about-section .fs-2 {
        font-size: 1.3rem !important;
      }

      .contact-section .col-md-4 > div {
        padding: 1rem;
      }
    }

    /* Professional Enhancements (No change required here, but included for completeness) */
    .navbar-toggler {
      border: none;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 8px;
      padding: 0.5rem;
    }

    .navbar-toggler:focus {
      box-shadow: 0 0 0 0.2rem rgba(79, 172, 254, 0.25);
    }

    .navbar-toggler-icon {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='m4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    }

    .service-card {
      position: relative;
      overflow: hidden;
    }

    .service-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: left 0.5s;
    }

    .service-card:hover::before {
      left: 100%;
    }

    .btn-hero, .btn-outline-hero {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .btn-hero::before, .btn-outline-hero::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .btn-hero:hover::before, .btn-outline-hero:hover::before {
      width: 300px;
      height: 300px;
    }

    .global-rating-btn {
      position: relative;
      overflow: hidden;
    }

    .global-rating-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .global-rating-btn:hover::before {
      left: 100%;
    }

    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }

    /* Loading animation */
    .loading {
      opacity: 0;
      animation: fadeIn 0.8s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Enhanced glassmorphism */
    .glass-card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(25px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
    }

    /* Professional color scheme */
    .text-gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .bg-gradient-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .bg-gradient-secondary {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }

    /* Enhanced shadows */
    .shadow-professional {
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08), 0 5px 10px rgba(0, 0, 0, 0.04); /* More compact shadow */
    }

    .shadow-professional-hover:hover {
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1), 0 8px 15px rgba(0, 0, 0, 0.06); /* More compact hover shadow */
      transform: translateY(-3px);
    }

    /* Interactive Star Rating Styles */
    .star-rating-input {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 5px;
    }

    .star-rating-input input[type="radio"] {
      display: none;
    }

    .star-rating-input label {
      font-size: 2rem;
      color: #ddd;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0;
    }

    .star-rating-input label:hover,
    .star-rating-input label:hover ~ label,
    .star-rating-input input[type="radio"]:checked ~ label {
      color: #ffc107;
      transform: scale(1.1);
    }

    .star-rating-input input[type="radio"]:checked ~ label {
      color: #ffc107;
    }

    .star-rating-input label:hover {
      color: #ffed4e;
    }

    /* Enhanced Image Upload Styles */
    .image-upload-area {
      border: 2px dashed #4facfe;
      border-radius: 10px;
      padding: 2rem;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      background: rgba(79, 172, 254, 0.05);
    }

    .image-upload-area:hover {
      border-color: #00f2fe;
      background: rgba(79, 172, 254, 0.1);
    }

    .image-upload-area.dragover {
      border-color: #ffc107;
      background: rgba(255, 193, 7, 0.1);
    }

    .image-upload-icon {
      font-size: 3rem;
      color: #4facfe;
      margin-bottom: 1rem;
    }

    /* Loading States */
    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      z-index: 10;
    }

    .spinner-border-sm {
      width: 1rem;
      height: 1rem;
    }
  </style>
</head>
<body>

  <nav class="navbar fixed-top">
    <div class="container d-flex justify-content-between align-items-center">
      <a class="navbar-brand d-flex align-items-center" href="#home">
        <span class="navbar-text">Annapoorneshwari Tyre & Painting Works</span>
      </a>
      <button class="navbar-toggler" type="button" id="sidebarToggle">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>

  <div class="sidebar" id="sidebarMenu" aria-label="Mobile navigation sidebar">
    <ul class="navbar-nav flex-column">
      <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
      <li class="nav-item"><a class="nav-link" href="#services">Services</a></li>
      <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
      <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
      <li class="nav-item"><a class="nav-link" href="/developer">Developer</a></li>
      {% if session.get('user_id') %}
        <li class="nav-item"><a class="nav-link" href="/user/dashboard">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
      {% else %}
        <li class="nav-item"><a class="nav-link" href="/login">Login</a></li>
      {% endif %}
    </ul>
  </div>
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

<section id="home" class="hero-section d-flex align-items-center justify-content-center" style="min-height: 70vh; padding-top: 120px;">
  <div class="container text-center">
    <div class="hero-content">
      <h1 class="hero-heading mb-3" style="font-size: 2.5rem; line-height: 1.2;">Excellence in Repair, Commitment in Service</h1>
      <p class="hero-subtitle mb-4" style="font-size: 1.1rem;">Professional Tyre, Painting & Automotive Services</p>
      
      <div class="d-flex flex-column flex-sm-row justify-content-center gap-3">
        <!-- Pre-Booking Button -->
        <a href="/prebook" class="btn" 
           style="background: var(--secondary-gradient); border: none; color: white; padding: 12px 30px; border-radius: 50px; font-weight: 500; display: inline-flex; align-items: center; justify-content: center; transition: transform 0.2s;">
          <i class="fas fa-calendar-check me-2"></i>Pre-Booking
        </a>

        <!-- Explore Services Button -->
        <a href="#services" class="btn" 
           style="background: transparent; border: 2px solid #4facfe; color: #4facfe; padding: 12px 30px; border-radius: 50px; font-weight: 500; display: inline-flex; align-items: center; justify-content: center; transition: all 0.2s;">
          <i class="fas fa-tools me-2"></i>Explore Services
        </a>
      </div>
    </div>
  </div>
</section>


  <section id="services" class="py-5">
    <div class="container">
      <div class="section-container">
        <h2 class="section-title">Our Services</h2>
        <div class="row g-4">
          
          <div class="col-md-6 col-lg-3">
            <a href="/service/Greasing" style="text-decoration: none; color: inherit;">
              <div class="service-card">
                <div class="service-icon"><i class="fas fa-spray-can"></i></div>
                <h4 class="fw-bold mb-3 text-center">Greasing</h4>
                <p class="mb-3 text-center">Professional greasing services</p>
                <div class="rating-display" id="rating-greasing">
                  <div class="text-center">
                    <div class="star-rating">
                      <span>{{ avg_ratings.get('Greasing', {}).get('average', 'N/A') }}</span>
                      <i class="fas fa-star"></i>
                    </div>
                    <small class="text-muted">({{ avg_ratings.get('Painting', {}).get('count', 0) }} reviews)</small>
                  </div>
                </div>
              </div>
            </a>
          </div>

          <div class="col-md-6 col-lg-3">
            <a href="/service/Puncturing" style="text-decoration: none; color: inherit;">
              <div class="service-card">
                <div class="service-icon"><i class="fas fa-bolt"></i></div>
                <h4 class="fw-bold mb-3 text-center">Puncturing</h4>
                <p class="mb-3 text-center">Quick puncture repairs</p>
                <div class="rating-display" id="rating-puncturing">
                  <div class="text-center">
                    <div class="star-rating">
                      <span>{{ avg_ratings.get('Puncturing', {}).get('average', 'N/A') }}</span>
                      <i class="fas fa-star"></i>
                    </div>
                    <small class="text-muted">({{ avg_ratings.get('Puncturing', {}).get('count', 0) }} reviews)</small>
                  </div>
                </div>
              </div>
            </a>
          </div>

          <div class="col-md-6 col-lg-3">
            <a href="/service/Tyre Issues" style="text-decoration: none; color: inherit;">
              <div class="service-card">
                <div class="service-icon"><i class="fas fa-wrench"></i></div>
                <h4 class="fw-bold mb-3 text-center">Tyre Issues</h4>
                <p class="mb-3 text-center">Complete tyre solutions</p>
                <div class="rating-display" id="rating-tyre-issues">
                  <div class="text-center">
                    <div class="star-rating">
                      <span>{{ avg_ratings.get('Tyre Issues', {}).get('average', 'N/A') }}</span>
                      <i class="fas fa-star"></i>
                    </div>
                    <small class="text-muted">({{ avg_ratings.get('Tyre Issues', {}).get('count', 0) }} reviews)</small>
                  </div>
                </div>
              </div>
            </a>
          </div>

          <div class="col-md-6 col-lg-3">
            <a href="/service/Painting" style="text-decoration: none; color: inherit;">
              <div class="service-card">
                <div class="service-icon"><i class="fas fa-paint-brush"></i></div>
                <h4 class="fw-bold mb-3 text-center">Painting</h4>
                <p class="mb-3 text-center">Professional painting services</p>
                <div class="rating-display" id="rating-painting">
                  <div class="text-center">
                    <div class="star-rating">
                      <span>{{ avg_ratings.get('Painting', {}).get('average', 'N/A') }}</span>
                      <i class="fas fa-star"></i>
                    </div>
                    <small class="text-muted">({{ avg_ratings.get('Painting', {}).get('count', 0) }} reviews)</small>
                  </div>
                </div>
              </div>
            </a>
          </div>

        </div>
        
        <div class="text-center mt-5">
          <button class="btn global-rating-btn" onclick="openGlobalRating()">
            <i class="fas fa-star me-2"></i> Rate Our Services
          </button>
          <p class="text-muted mt-3">
            <i class="fas fa-info-circle me-1"></i> Complete a booking first to leave a rating
          </p>
        </div>
      </div>
    </div>
  </section>

<section id="about" class="py-5">
  <div class="container">
    <div class="section-container text-center text-lg-start">
      <h2 class="section-title mb-4">About Us</h2>
      <div class="row g-4 align-items-center">
        
        <!-- Text Content -->
        <div class="col-lg-6">
          <h3 class="fw-bold mb-4" style="line-height: 1.3;">Excellence in Automotive Services</h3>
          <p class="mb-3" style="max-width: 500px;">Annapoorneshwari Tyre & Painting Works has been serving the community with dedication and expertise for over a decade. Our commitment to quality service and customer satisfaction has made us a trusted name in automotive care.</p>
          <p class="mb-3" style="max-width: 500px;">We specialize in comprehensive tyre solutions, professional painting services, greasing, and puncture repairs. Our skilled technicians use modern equipment and techniques to ensure your vehicle receives the best possible care.</p>

          <div class="row g-3 mt-4 justify-content-center justify-content-lg-start">
            <div class="col-6 col-md-4">
              <div class="text-center text-lg-start">
                <div class="fs-2 fw-bold text-primary">10+</div>
                <small class="text-muted">Years of Experience</small>
              </div>
            </div>
            <div class="col-6 col-md-4">
              <div class="text-center text-lg-start">
                <div class="fs-2 fw-bold text-primary">1000+</div>
                <small class="text-muted">Happy Customers</small>
              </div>
            </div>
          </div>
        </div>

        <!-- Icon Cards -->
        <div class="col-lg-6">
          <div class="row g-3">
            <!-- Expert Technicians -->
            <div class="col-6">
              <div style="background: var(--glass-bg); border-radius: 16px; padding: 2rem; text-align: center; height: 100%;">
                <div style="width: 60px; height: 60px; border-radius: 16px; background: var(--secondary-gradient); display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                  <i class="fas fa-tools" style="font-size: 1.5rem; color: white;"></i>
                </div>
                <h6 class="fw-bold">Expert Technicians</h6>
                <p class="text-muted small">Skilled professionals with years of experience</p>
              </div>
            </div>

            <!-- Quick Service -->
            <div class="col-6">
              <div style="background: var(--glass-bg); border-radius: 16px; padding: 2rem; text-align: center; height: 100%;">
                <div style="width: 60px; height: 60px; border-radius: 16px; background: var(--secondary-gradient); display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                  <i class="fas fa-clock" style="font-size: 1.5rem; color: white;"></i>
                </div>
                <h6 class="fw-bold">Quick Service</h6>
                <p class="text-muted small">Fast and efficient service delivery</p>
              </div>
            </div>

            <!-- Quality Guarantee -->
            <div class="col-6">
              <div style="background: var(--glass-bg); border-radius: 16px; padding: 2rem; text-align: center; height: 100%;">
                <div style="width: 60px; height: 60px; border-radius: 16px; background: var(--secondary-gradient); display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                  <i class="fas fa-shield-alt" style="font-size: 1.5rem; color: white;"></i>
                </div>
                <h6 class="fw-bold">Quality Guarantee</h6>
                <p class="text-muted small">Warranty on all our services</p>
              </div>
            </div>

            <!-- Customer First -->
            <div class="col-6">
              <div style="background: var(--glass-bg); border-radius: 16px; padding: 2rem; text-align: center; height: 100%;">
                <div style="width: 60px; height: 60px; border-radius: 16px; background: var(--secondary-gradient); display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                  <i class="fas fa-handshake" style="font-size: 1.5rem; color: white;"></i>
                </div>
                <h6 class="fw-bold">Customer First</h6>
                <p class="text-muted small">Your satisfaction is our priority</p>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<section id="contact" class="py-4 contact-section">
  <div class="container">
    <div class="section-container">
      <h2 class="section-title">Contact Us</h2>
      <div class="row g-3">
        
        <!-- Phone Card -->
        <div class="col-md-4">
          <a href="tel:9844053505" style="text-decoration: none; color: inherit;">
            <div style="background: var(--glass-bg); border-radius: 12px; padding: 1.25rem; text-align: center; height: 100%; display: flex; flex-direction: column; justify-content: center; cursor: pointer; transition: transform 0.2s;">
              <div style="width: 50px; height: 50px; border-radius: 12px; background: var(--secondary-gradient); display: flex; align-items: center; justify-content: center; margin: 0 auto 0.75rem;">
                <i class="fas fa-phone" style="font-size: 1.25rem; color: white;"></i>
              </div>
              <h5 style="font-size: 1.1rem; margin-bottom: 0.5rem;">Phone</h5>
              <p style="font-size: 0.95rem; margin: 0; word-break: break-all;">9844053505</p>
            </div>
          </a>
        </div>

        <!-- Email Card -->
        <div class="col-md-4">
          <a href="mailto:kulaladarsh1@gmail.com" style="text-decoration: none; color: inherit;">
            <div style="background: var(--glass-bg); border-radius: 12px; padding: 1.25rem; text-align: center; height: 100%; display: flex; flex-direction: column; justify-content: center; cursor: pointer; transition: transform 0.2s;">
              <div style="width: 50px; height: 50px; border-radius: 12px; background: var(--secondary-gradient); display: flex; align-items: center; justify-content: center; margin: 0 auto 0.75rem;">
                <i class="fas fa-envelope" style="font-size: 1.25rem; color: white;"></i>
              </div>
              <h5 style="font-size: 1.1rem; margin-bottom: 0.5rem;">Email</h5>
              <p style="font-size: 0.9rem; margin: 0; word-break: break-word;">kulaladarsh1@gmail.com</p>
            </div>
          </a>
        </div>

        <!-- Location Card -->
        <div class="col-md-4">
          <a href="https://maps.app.goo.gl/gFdhx4RuwekJ21AGA" target="_blank" rel="noopener" style="text-decoration: none; color: inherit;">
            <div style="background: var(--glass-bg); border-radius: 12px; padding: 1.25rem; text-align: center; height: 100%; display: flex; flex-direction: column; justify-content: center; cursor: pointer; transition: transform 0.2s;">
              <div style="width: 50px; height: 50px; border-radius: 12px; background: var(--secondary-gradient); display: flex; align-items: center; justify-content: center; margin: 0 auto 0.75rem;">
                <i class="fas fa-map-marker-alt" style="font-size: 1.25rem; color: white;"></i>
              </div>
              <h5 style="font-size: 1.1rem; margin-bottom: 0.5rem;">Location</h5>
              <p style="font-size: 0.95rem; margin: 0; color: inherit;">Hebri Santekatte</p>
            </div>
          </a>
        </div>

      </div>
      <div class="text-center mt-3">
        <small class="text-muted" style="font-size: 0.85rem;">Total Visitors: {{ total_visits }}</small>
      </div>
    </div>
  </div>
</section>


<!-- Professional Rating Modal -->
<div class="modal fade" id="ratingModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content" style="border-radius: 24px; border: none; box-shadow: 0 20px 60px rgba(0,0,0,0.2);">

      <!-- Modal Header -->
      <div class="modal-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 24px 24px 0 0; padding: 24px;">
        <div>
          <h5 class="modal-title mb-1"><i class="fas fa-star me-2"></i>Rate Your Experience</h5>
          <p class="mb-0 small" style="opacity: 0.9;">Your feedback helps us improve</p>
        </div>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body p-4">

        <!-- Step 1: Select Booking -->
        <div id="bookingSelectionStep">
          <h6 class="fw-bold mb-3" style="color: #333;">Select the service you want to rate:</h6>

          <!-- Loading State -->
          <div id="bookingsLoading" class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
            <p class="text-muted mt-2">Loading your completed services...</p>
          </div>

          <!-- Bookings List -->
          <div id="bookingList" style="display: none;"></div>

          <!-- No Bookings State -->
          <div id="noBookingsMessage" style="display: none;" class="text-center py-5">
            <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
            <h6 class="text-muted">No Completed Services Found</h6>
            <p class="small text-muted">Complete a service booking first to leave a rating</p>
            <a href="/prebook" class="btn btn-primary mt-2">
              <i class="fas fa-calendar-plus me-2"></i>Book a Service
            </a>
          </div>
        </div>

        <!-- Step 2: Rating Form -->
        <form id="ratingForm" style="display: none;" enctype="multipart/form-data">
          <input type="hidden" id="selectedBookingId" name="booking_id" />
          <input type="hidden" id="selectedServiceName" name="service_name" />

          <!-- Booking Info Card -->
          <div class="alert" id="bookingInfo" style="background: linear-gradient(135deg, rgba(79, 172, 254, 0.1), rgba(0, 242, 254, 0.1)); border: 1px solid rgba(79, 172, 254, 0.3); border-radius: 12px;"></div>

          <!-- User Name -->
          <div class="mb-4">
            <label for="userName" class="form-label fw-bold" style="color: #333;">
              <i class="fas fa-user me-2"></i>Your Name
            </label>
            <input type="text" class="form-control" id="userName" name="user_name"
                   value="{{ session.get('user_name', '') }}" readonly
                   style="border-radius: 12px; border: 2px solid #e0e0e0; background: #f8f9fa;">
            <small class="text-muted">Auto-filled from your account</small>
          </div>

          <!-- Star Rating -->
          <div class="mb-4">
            <label class="form-label fw-bold" style="color: #333;">
              <i class="fas fa-star me-2"></i>How would you rate this service?
            </label>
            <div class="star-rating-input mb-2" id="starRatingInput" style="justify-content: center; gap: 8px;">
              <input type="radio" id="star5" name="rating" value="5" required />
              <label for="star5" title="Excellent - 5 stars" style="font-size: 2.5rem; cursor: pointer;">
                <i class="far fa-star"></i>
              </label>
              <input type="radio" id="star4" name="rating" value="4" required />
              <label for="star4" title="Very Good - 4 stars" style="font-size: 2.5rem; cursor: pointer;">
                <i class="far fa-star"></i>
              </label>
              <input type="radio" id="star3" name="rating" value="3" required />
              <label for="star3" title="Good - 3 stars" style="font-size: 2.5rem; cursor: pointer;">
                <i class="far fa-star"></i>
              </label>
              <input type="radio" id="star2" name="rating" value="2" required />
              <label for="star2" title="Fair - 2 stars" style="font-size: 2.5rem; cursor: pointer;">
                <i class="far fa-star"></i>
              </label>
              <input type="radio" id="star1" name="rating" value="1" required />
              <label for="star1" title="Poor - 1 star" style="font-size: 2.5rem; cursor: pointer;">
                <i class="far fa-star"></i>
              </label>
            </div>
            <p class="text-center mb-0" id="ratingText" style="font-size: 1.1rem; color: #666; font-weight: 500;">
              Click stars to rate
            </p>
          </div>

          <!-- Comment -->
          <div class="mb-4">
            <label for="comment" class="form-label fw-bold" style="color: #333;">
              <i class="fas fa-comment-dots me-2"></i>Share Your Experience <span class="text-muted fw-normal">(Optional)</span>
            </label>
            <textarea class="form-control" id="comment" name="comment" rows="4"
                      placeholder="Tell us about your experience with our service..."
                      style="border-radius: 12px; border: 2px solid #e0e0e0;"></textarea>
          </div>

          <!-- Image Upload -->
          <div class="mb-4">
            <label for="photos" class="form-label fw-bold" style="color: #333;">
              <i class="fas fa-camera me-2"></i>Add Photos <span class="text-muted fw-normal">(Optional - Max 5)</span>
            </label>
            <div class="image-upload-area" id="imageUploadArea"
                 style="border: 2px dashed #4facfe; border-radius: 12px; padding: 2rem; text-align: center; cursor: pointer; background: rgba(79, 172, 254, 0.05); transition: all 0.3s;">
              <i class="fas fa-cloud-upload-alt image-upload-icon" style="font-size: 3rem; color: #4facfe;"></i>
              <p class="mb-2" style="color: #666;">Click to upload or drag and drop</p>
              <small class="text-muted">JPG, PNG, GIF - Max 5MB each</small>
              <input type="file" class="form-control d-none" id="photos" name="photos" multiple accept="image/*">
            </div>
            <div id="imagePreview" class="image-preview-container mt-3"></div>
          </div>

          <!-- Action Buttons -->
          <div class="d-flex justify-content-between align-items-center">
            <button type="button" class="btn btn-light" onclick="backToBookingSelection()"
                    style="border-radius: 12px; padding: 12px 24px; border: 2px solid #e0e0e0;">
              <i class="fas fa-arrow-left me-2"></i>Back
            </button>
            <button type="submit" class="btn" id="submitRatingBtn"
                    style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; border: none; border-radius: 12px; padding: 12px 32px; font-weight: 600;">
              <i class="fas fa-paper-plane me-2"></i>Submit Rating
            </button>
          </div>
        </form>

        <!-- Loading State -->
        <div id="loadingSpinner" class="text-center py-5 d-none">
          <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;"></div>
          <p class="mt-3 fw-bold" style="color: #666;">Submitting your rating...</p>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- Enhanced CSS for Professional Rating Modal -->
<style>
/* Professional Booking Selection Cards */
.booking-option {
  padding: 16px 20px;
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  background: white;
  position: relative;
  overflow: hidden;
}

.booking-option::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(79, 172, 254, 0.1), transparent);
  transition: left 0.5s;
}

.booking-option:hover {
  border-color: #4facfe;
  background: rgba(79, 172, 254, 0.05);
  transform: translateX(4px);
  box-shadow: 0 4px 12px rgba(79, 172, 254, 0.15);
}

.booking-option:hover::before {
  left: 100%;
}

.booking-option.selected {
  border-color: #4facfe;
  background: linear-gradient(135deg, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15));
  box-shadow: 0 6px 20px rgba(79, 172, 254, 0.2);
}

.booking-option.selected::after {
  content: '\f00c';
  font-family: 'Font Awesome 6 Free';
  font-weight: 900;
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: #4facfe;
  font-size: 1.2rem;
}

/* Professional Star Rating */
.star-rating-input {
  display: flex;
  flex-direction: row-reverse;
  justify-content: center;
  gap: 4px;
}

.star-rating-input input[type="radio"] {
  display: none;
}

.star-rating-input label {
  color: #ddd;
  transition: all 0.3s ease;
  margin: 0;
}

.star-rating-input label:hover,
.star-rating-input label:hover ~ label {
  color: #ffc107;
  transform: scale(1.1);
}

.star-rating-input input[type="radio"]:checked ~ label {
  color: #ffc107;
}

/* Image Upload Area */
#imageUploadArea:hover {
  border-color: #00f2fe;
  background: rgba(79, 172, 254, 0.1);
}

#imageUploadArea.dragover {
  border-color: #ffc107;
  background: rgba(255, 193, 7, 0.1);
  transform: scale(1.02);
}

/* Image Preview */
.image-preview-container {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.image-preview-item {
  position: relative;
  width: 100px;
  height: 100px;
  border-radius: 12px;
  overflow: hidden;
  border: 2px solid #e0e0e0;
  transition: transform 0.3s;
}

.image-preview-item:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.image-preview-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.image-preview-remove {
  position: absolute;
  top: 4px;
  right: 4px;
  background: rgba(255, 0, 0, 0.9);
  color: white;
  border: none;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  cursor: pointer;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
}

.image-preview-remove:hover {
  background: red;
  transform: scale(1.1);
}
</style>

<!-- Professional Rating JavaScript -->
<script>
let userBookings = [];
let selectedBooking = null;

// Open rating modal with loading state
async function openGlobalRating() {
  try {
    const modal = new bootstrap.Modal(document.getElementById('ratingModal'));
    modal.show();

    // Show loading
    document.getElementById('bookingsLoading').style.display = 'block';
    document.getElementById('bookingList').style.display = 'none';
    document.getElementById('noBookingsMessage').style.display = 'none';

    const response = await fetch('/api/check-booking');
    const result = await response.json();

    document.getElementById('bookingsLoading').style.display = 'none';

    if (result.booked && result.bookings.length > 0) {
      userBookings = result.bookings;
      showBookingSelection();
    } else {
      document.getElementById('noBookingsMessage').style.display = 'block';
    }
  } catch (error) {
    console.error('Error checking booking:', error);
    document.getElementById('bookingsLoading').style.display = 'none';
    alert("Unable to verify booking status. Please try again.");
  }
}

// Show booking selection with professional cards
function showBookingSelection() {
  document.getElementById('bookingSelectionStep').style.display = 'block';
  document.getElementById('ratingForm').style.display = 'none';
  document.getElementById('bookingList').style.display = 'block';

  const bookingList = document.getElementById('bookingList');
  bookingList.innerHTML = '';

  userBookings.forEach(booking => {
    const bookingId = booking.booking_id;
    booking.services.forEach(serviceName => {
      const div = document.createElement('div');
      div.className = 'booking-option';
      div.innerHTML = `
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h6 class="mb-1 fw-bold" style="color: #333;">${serviceName}</h6>
            <small class="text-muted"><i class="fas fa-receipt me-1"></i>Booking ID: ${bookingId}</small>
          </div>
          <i class="fas fa-chevron-right" style="color: #ccc;"></i>
        </div>
      `;
      div.onclick = () => selectBooking(bookingId, serviceName, div);
      bookingList.appendChild(div);
    });
  });
}

// Select a booking with animation
function selectBooking(bookingId, serviceName, element) {
  document.querySelectorAll('.booking-option').forEach(el => {
    el.classList.remove('selected');
  });

  element.classList.add('selected');
  selectedBooking = { bookingId, serviceName };

  setTimeout(() => {
    showRatingForm(bookingId, serviceName);
  }, 300);
}

// Show rating form
function showRatingForm(bookingId, serviceName) {
  document.getElementById('bookingSelectionStep').style.display = 'none';
  document.getElementById('ratingForm').style.display = 'block';

  document.getElementById('selectedBookingId').value = bookingId;
  document.getElementById('selectedServiceName').value = serviceName;

  document.getElementById('bookingInfo').innerHTML = `
    <div class="d-flex align-items-center">
      <i class="fas fa-info-circle fa-2x me-3" style="color: #4facfe;"></i>
      <div>
        <strong style="color: #333;">Rating for:</strong> ${serviceName}<br>
        <small class="text-muted">Booking ID: ${bookingId}</small>
      </div>
    </div>
  `;
}

// Back to booking selection
function backToBookingSelection() {
  document.getElementById('ratingForm').reset();
  document.getElementById('imagePreview').innerHTML = '';
  showBookingSelection();
}

// Image upload with drag & drop
document.getElementById('imageUploadArea').addEventListener('click', function() {
  document.getElementById('photos').click();
});

document.getElementById('photos').addEventListener('change', handleImageSelect);

function handleImageSelect(e) {
  const preview = document.getElementById('imagePreview');
  preview.innerHTML = '';

  const files = Array.from(e.target.files).slice(0, 5);

  files.forEach((file, index) => {
    const reader = new FileReader();
    reader.onload = function(e) {
      const div = document.createElement('div');
      div.className = 'image-preview-item';
      div.innerHTML = `
        <img src="${e.target.result}" alt="Preview ${index + 1}">
        <button type="button" class="image-preview-remove" onclick="removeImage(${index})">
          <i class="fas fa-times"></i>
        </button>
      `;
      preview.appendChild(div);
    };
    reader.readAsDataURL(file);
  });
}

function removeImage(index) {
  const input = document.getElementById('photos');
  const dt = new DataTransfer();
  const files = Array.from(input.files);
  files.splice(index, 1);
  files.forEach(file => dt.items.add(file));
  input.files = dt.files;
  input.dispatchEvent(new Event('change'));
}

// Submit rating
document.getElementById('ratingForm').addEventListener('submit', async function(e) {
  e.preventDefault();

  const form = e.target;
  const loadingSpinner = document.getElementById('loadingSpinner');
  const submitBtn = document.getElementById('submitRatingBtn');

  form.style.display = 'none';
  loadingSpinner.classList.remove('d-none');
  submitBtn.disabled = true;

  try {
    const formData = new FormData(form);

    const response = await fetch('/api/rate-with-images', {
      method: 'POST',
      body: formData
    });

    const result = await response.json();

    if (result.success) {
      // Success animation
      loadingSpinner.innerHTML = `
        <i class="fas fa-check-circle fa-4x text-success mb-3"></i>
        <h5 class="text-success">Thank You!</h5>
        <p class="text-muted">Your rating has been submitted successfully</p>
      `;

      setTimeout(() => {
        const modal = bootstrap.Modal.getInstance(document.getElementById('ratingModal'));
        modal.hide();
        form.reset();
        document.getElementById('imagePreview').innerHTML = '';
        loadAverageRatingsWithStars();
      }, 2000);
    } else {
      alert(`Error: ${result.error || 'Failed to submit rating'}`);
      form.style.display = 'block';
      loadingSpinner.classList.add('d-none');
    }
  } catch (error) {
    console.error('Error:', error);
    alert('Network error. Please try again.');
    form.style.display = 'block';
    loadingSpinner.classList.add('d-none');
  } finally {
    submitBtn.disabled = false;
  }
});

// Initialize star rating
function initializeStarRating() {
  const starRatingInput = document.getElementById('starRatingInput');
  const ratingText = document.getElementById('ratingText');
  const labels = starRatingInput.querySelectorAll('label');

  const ratingTexts = {
    1: ' Poor - Needs improvement',
    2: ' Fair - Below expectations',
    3: ' Good - Met expectations',
    4: ' Very Good - Exceeded expectations',
    5: ' Excellent - Outstanding service!'
  };

  labels.forEach((label, index) => {
    const rating = 5 - index;

    label.addEventListener('click', function() {
      document.getElementById(`star${rating}`).checked = true;
      ratingText.textContent = ratingTexts[rating];
      ratingText.style.color = '#ffc107';
    });

    label.addEventListener('mouseenter', function() {
      ratingText.textContent = ratingTexts[rating];
      ratingText.style.color = '#ffed4e';
    });
  });

  starRatingInput.addEventListener('mouseleave', function() {
    const checked = starRatingInput.querySelector('input:checked');
    if (checked) {
      const rating = parseInt(checked.value);
      ratingText.textContent = ratingTexts[rating];
      ratingText.style.color = '#ffc107';
    } else {
      ratingText.textContent = 'Click stars to rate';
      ratingText.style.color = '#666';
    }
  });
}

// Load and update average ratings with stars
async function loadAverageRatingsWithStars() {
  try {
    const response = await fetch('/api/average-ratings');
    const data = await response.json();

    if (data.success) {
      // Update each service rating display
      const services = ['greasing', 'puncturing', 'tyre-issues', 'painting'];

      services.forEach(service => {
        const ratingElement = document.getElementById(`rating-${service}`);
        if (ratingElement && data.ratings[service]) {
          const rating = data.ratings[service];
          const average = parseFloat(rating.average).toFixed(1);
          const count = rating.count;

          ratingElement.innerHTML = `
            <div class="text-center">
              <div class="star-rating">
                <span>${average}</span>
                <i class="fas fa-star"></i>
              </div>
              <small class="text-muted">(${count} reviews)</small>
            </div>
          `;
        }
      });
    }
  } catch (error) {
    console.error('Error loading average ratings:', error);
  }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  initializeStarRating();
  loadAverageRatingsWithStars();
  setInterval(loadAverageRatingsWithStars, 60000);
});
</script>

 <!-- Footer -->
<footer class="py-3" style="background: var(--glass-bg); backdrop-filter: blur(20px); border-top: 1px solid rgba(255, 255, 255, 0.1); margin-top: 3rem;">
  <div class="container">
    <div class="row align-items-center text-center text-md-start">
      
      <!-- Copyright -->
      <div class="col-md-6 mb-2 mb-md-0">
        <p class="text-muted mb-0">&copy; 2025 Annapoorneshwari Tyre & Painting Works. All rights reserved.</p>
      </div>

      <!-- Social Icons -->
      <div class="col-md-6">
        <div class="d-flex justify-content-center justify-content-md-end">
          <a href="#" class="text-muted me-3 fs-5" title="Facebook"><i class="fab fa-facebook"></i></a>
          <a href="#" class="text-muted me-3 fs-5" title="Instagram"><i class="fab fa-instagram"></i></a>
          <a href="#" class="text-muted me-3 fs-5" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
          <a href="#" class="text-muted fs-5" title="Twitter"><i class="fab fa-twitter"></i></a>
        </div>
      </div>

    </div>
  </div>
</footer>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

  <script>
    AOS.init({ duration: 800, once: true });

    // Sidebar toggle functionality
    document.getElementById('sidebarToggle').addEventListener('click', function() {
      const sidebar = document.getElementById('sidebarMenu');
      const overlay = document.getElementById('sidebarOverlay');
      sidebar.classList.toggle('active');
      overlay.classList.toggle('active');
    });

    document.getElementById('sidebarOverlay').addEventListener('click', function() {
      const sidebar = document.getElementById('sidebarMenu');
      const overlay = document.getElementById('sidebarOverlay');
      sidebar.classList.remove('active');
      overlay.classList.remove('active');
    });

    // Close sidebar when clicking on nav links
    document.querySelectorAll('#sidebarMenu .nav-link').forEach(link => {
      link.addEventListener('click', function() {
        const sidebar = document.getElementById('sidebarMenu');
        const overlay = document.getElementById('sidebarOverlay');
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
      });
    });


  </script>
</body>
